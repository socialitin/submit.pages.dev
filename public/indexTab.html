<!doctype html>
<html lang="en">
<head>
    <meta charset="utf8">
    <title>Cloudflare Pages 2 Tournet presence</title>
    <meta name="theme-color" content="#d86300">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="icon" type="image/png" href="https://www.cloudflare.com/favicon-128.png">
    <link rel="stylesheet" href="/index.css">
    <style>
        .tab {
          overflow: hidden;
          border: 1px solid #ccc;
          background-color: #f1f1f1;
        }
        
        .tab button {
          background-color: inherit;
          float: left;
          border: none;
          outline: none;
          cursor: pointer;
          padding: 14px 16px;
        }
        
        .tab button:hover {
          background-color: #ddd;
        }
        
        .tab button.active {
          background-color: #ccc;
        }
        
        .tabcontent {
          display: none; /* Initially hide all content */
          width: 50%;
          padding: 6px 12px;
          border: 1px solid #ccc;
          border-top: none;
        }
    </style>
</head>
<body>
    <div class="tab">
        <button class="tablinks" onclick="openTab(event, 'Tab1')">Join</button>
        <button class="tablinks" onclick="openTab(event, 'Tab2')">Edit</button>
    </div>

    <div id="Tab1" class="tabcontent">
        <h3>Content 1</h3>
        <p>This is the content for Tab 1.</p>
        <main>
            <h1> Pitch your Offer </h1>

            <blockquote >
                <p id ="subjjson" data-json=''>
                  Welcome he the niche social network for Destination Sales and Promotions
                  
                </p>
            </blockquote>   
            <form method="POST" action="/api/submit">
                <div class="input">
                    <label for="name">Name Product or Offer</label>
                    <input id="name" name="name" type="text" />
                </div>

                <div class="input">
                    <label for="email">URL </label>
                    <input id="email" name="email" type="url" />
                </div>

                <div class="input">
                    <label for="referers">Type/kind of offer</label>
                    <select id="referers" name="referers">
                        <option hidden disabled selected value></option>
                        <option value="Sightseeing">Sightseeing</option>
                        <option value="Excursion">Excursion</option>
                        <option value="Night life">Night life</option>
                        <option value="Walking tour">Walking tour</option>
                        <option value="Water cruising">Water cruising</option>
                    </select>
                </div>

                <div class="checklist">
                    <label>What's the venue</label>
                    <ul>
                        <li>
                            <input id="m1" type="checkbox" name="venue" value="Attraction" />
                            <label for="m1">Attraction</label>
                        </li>
                        <li>
                            <input id="m2" type="checkbox" name="venue" value="Club" />
                            <label for="m2">Club</label>
                        </li>
                        <li>
                            <input id="m3" type="checkbox" name="venue" value="Accommodation" />
                            <label for="m3">Accommodation</label>
                        </li>
                        <li>
                            <input id="m4" type="checkbox" name="venue" value="Motorcoach" />
                            <label for="m4">Motorcoach</label>
                        </li>
                    </ul>
                </div>
                <div class="input">
                    <label for="pitch">Pitch!</label>
                    <input id="pitch" name="pitch" type="textarea" />
                </div>

                <button type="submit">Submit</button>
            </form>
        </main>
    </div>

	<div id="Tab2" class="tabcontent">
        <h3>Pitching now ...</h3>
		<blockquote >
			<p id ="subjjson" data-json=''>
			  Welcome he the niche social network for Destination Sales and Promotions
			  
			</p>
		</blockquote>  
        <div id ="jdata"></div>
		<img id="fjson" src="https://tournet.com/SocialITIN/img/feedicon.jpg" width="32px" height="32px" style="margin-top:10px; float:right;" 
        onclick="fetchjson()">   
        <div id ="ofrContainerFormkiosk" data-ofr='{"vendorId":227, "ofr_id": 538, "pds_id": 272825 }' data-mode="kiosk" data-view="mobile" style="width:100%; margin-top:50px; margin-left:5px;  float:left; ">
        </div>
        <div class="row">
            <div id="thumbs" style="width:15%; float:left;"></div> 
            <div width="4%"></div>
            <div id="itemImg" style ="width:85%; float:left;"></div>
        </div>   
    </div>

    <script>
        function openTab(evt, tabName) {
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tabcontent");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }
            tablinks = document.getElementsByClassName("tablinks");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
            }
            document.getElementById(tabName).style.display = "block";
            evt.currentTarget.className += " active";
        }

        // Add this to make Tab1 active by default when the page loads
        document.addEventListener("DOMContentLoaded", function() {
            document.querySelector('[onclick="openTab(event, \'Tab1\')"]').click();
        });
    </script>
	<script>
		async function fetchjson() {
		const response = await fetch('/api/fetchjson');
		const data = await response.json();
	//const data1 =JSON.stringify(data);
	console.log(data);
	var pics = data.NYCS[0].Pictures;
	///'[{"img":"https://mmedia.tournet.com/Tournet/www.travelknowhow.com/New York/ChicagoMusical/Orquesta center.png","description":"tickets from $ 150 to $420","name":"Orquesta Center "},{"img":"https://mmedia.tournet.com/Tournet/www.travelknowhow.com/New York/ChicagoMusical/Orquesta sides.png","description":"tickets from $ 120 ","name":"Orquesta left and right"},{"img":"https://mmedia.tournet.com/Tournet/www.travelknowhow.com/New York/ChicagoMusical/Mezzanine.png","description":"tickets from $ 120 ","name":"Mezzanine "},{"img":"https://mmedia.tournet.com/Tournet/www.travelknowhow.com/New York/ChicagoMusical/Rear Mezzanine.png","description":"tickets from $ 120","name":"Mezzanine Rear "}]'
	console.log(pics);		
var picsj = JSON.parse(pics);

	var tImgAll = '';
	for (var h = 0; h <picsj.length; h++ ) {
		jdata=[];
		var tname = picsj[h].name;
		var tdesc = picsj[h].description;
		jdata.push(tname);
		jdata.push(tdesc);
		var tprice ='';
var tImg = '<img name = "'+jdata+'" data ="'+picsj[h]+'" id = "'+h+'" src="'+picsj[h].img+'" style="width: 99%;" onclick = "picsDtl(event,src,name);" >';
console.log(tImgAll,jdata);
var tImgAll = tImgAll+tImg;
	};
document.getElementById("thumbs").innerHTML= tImgAll;
//	
	var tVideo = '<div width="20%" ">'+data.embVideo+data.Pitch+'</div>';
	document.getElementById("itemImg").innerHTML = tVideo;
	document.getElementById("City").value = data.City;
	document.getElementById("Province").value = data.Province;
	document.getElementById("pitch").value = data.Pitch;
	document.getElementById("Pictures").value = pics;
	document.getElementById("embVideo").value = tVideo;
			}

		
		</script>
</body>
</html>
