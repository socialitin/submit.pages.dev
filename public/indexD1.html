<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf8">
		<title>Cloudflare Pages 2 Tournet presence</title>
		<meta name="theme-color" content="#d86300">
		<meta name="mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="viewport" content="width=device-width,initial-scale=1">
		<link rel="icon" type="image/png" href="https://www.cloudflare.com/favicon-128.png">
		<link rel="stylesheet" href="/index.css">
		<style>
.tab {
  overflow: hidden;
  border: 1px solid #ccc;
  background-color: #f1f1f1;
  display: inline-block; /* Ensure the container only takes as much space as needed */
}

.tab button {
  background-color: inherit;
  border: none;
  outline: none;
  cursor: pointer;
  padding: 14px 0; /* Adjust padding */
  display: inline-block; /* Display inline-block to prevent text from wrapping */
  transform: rotate(-90deg); /* Rotate text vertically */
  transform-origin: center center; /* Center rotation */
}

.tab button:hover {
  background-color: #ddd;
}

.tab button.active {
  background-color: #ccc;
}

.tabcontent {
  display: none;
  width: 50%;
  padding: 6px 12px;
  border: 1px solid #ccc;
  border-top: none;
}

.tabcontent.active {
  display: block;
}

			</style>
	</head>

	<body>
		<div class="tab">
			<button class="tablinks active" onclick="openTab(event, 'Tab1')">View</button>
			<button class="tablinks" onclick="openTab(event, 'Tab2')">Edit</button>
		  </div>
		  <div id="Tab1" class="tabcontent">
			<h3>Streaming now ...</h3>
			<div id ="jdata">
			<label>1<img id="fjson1" src="https://tournet.com/SocialITIN/img/feedicon.jpg" width="32px" height="32px" style="margin-top:10px; float:left;" ></label>
			<label>2</label><img id="fjson2" src="https://tournet.com/SocialITIN/img/feedicon.jpg" width="32px" height="32px" style="margin-top:10px; float:left;" >
			<label>3</label><img id="fjson3" src="https://tournet.com/SocialITIN/img/feedicon.jpg" width="32px" height="32px" style="margin-top:10px; float:left;" >
			
			<label>4</label><img id="fjson4" src="https://tournet.com/SocialITIN/img/feedicon.jpg" width="32px" height="32px" style="margin-top:10px; float:left;" onclick="d1tnhosts()">
			</div>
			<div id ="ofrContainerFormkiosk" data-ofr='{"vendorId":227, "ofr_id": 538, "pds_id": 272825 }' data-mode="kiosk" data-view="mobile" style="width:100%; margin-top:50px; margin-left:5px;  float:left; ">
			</div>
				<div class="row">
				<div id="thumbs" style="width:15%; float:left;" ></div>	
				<div width="2%"></div>
				<div>
				<div id="itemImg" style ="width:50%; float:left;"></div>
				<div id="picDtls" style ="width:20%; float:left;">
		
					
				</div>
		</div>	

	</div>
	
		</div>
		  <div id="Tab2" class="tabcontent">
			<p style=" float:right;">Publish <img id="fjson1" src="https://tournet.com/SocialITIN/img/feedicon.jpg" width="32px" height="32px" onclick = "d1tnupdate();"</p> 
		<main>
			
			<h1> Pitch your Offer </h1>

			<blockquote >
				<p id ="sjson" data-json=''>Edit your Pitch</p>
				<p>All Pitches submitted are <code>/Private</code>  untill you select one as  <code>/Public</code> directory, which contains 
						
			<form method="POST" action="/api/submit">
				<div class="input" type = "hidden">
					<label for="IATA"></label>
					<input id="IATA" name="IATA" type="text" />
					<input id="Province" name="Province" type="text" />
				</div>
				<div class="input" >
					<label for="name">Name of Offer</label>
					<input id="City" name="City" type="text" />
				</div>
				<div class="input" ">
					<label for="video">Video</label>
					<input id="embVideo" name="embVideo" type="array" />
				</div>
				<div class="input" ">
					<label for="pictures">Pictures </label>
					<input id="Pictures" name="Pictures" type="array" />
				</div>

				<div class="input">
					<label for="typeKind">Type/kind of offer</label>
					<select id="typeKind" name="typeKind">
						<option hidden disabled selected value></option>
						<option value="Sightseeing">Sightseeing</option>
						<option value="Excursion">Excursion</option>
						<option value="Night life">Night life</option>
						<option value="Walking tour">Walking tour</option>
						<option value="Water crusing">Water crusing</option>
					</select>
				</div>

				<div class="checklist">
					<label for="Venue">Whats the venue</label>
					<select id="venue" name="venue">
						<option hidden disabled selected value></option>
						<option value="Attraction">Attraction</option>
						<option value="Club">Club, Event</option>
						<option value="Accommodation">Accommodation</option>
						<option value="Motorcoach">Motorcoach</option>
						<option value="Other">Other ... </option>
					</select>

				</div>
				<div class="input">
					<label for="pitch">Pitch!</label>
					<input id="pitch" name="pitch" type="textarea" />
				</div>

				<button type="submit">Save & Preview</button>
				
			</form>
		</main>
	</div>
	<script>
		function openTab(evt, tabName) {
		  var i, tabcontent, tablinks;
		  tabcontent = document.getElementsByClassName("tabcontent");
		  for (i = 0; i < tabcontent.length; i++) {
			tabcontent[i].style.display = "none";
		  }
		  tablinks = document.getElementsByClassName("tablinks");
		  for (i = 0; i < tablinks.length; i++) {
			tablinks[i].className = tablinks[i].className.replace(" active", "");
		  }
		  document.getElementById(tabName).style.display = "block";
		  evt.currentTarget.className += " active";
		}
		</script>

<script>
	async function d1tnupdate() {
	const response = await fetch('/api/d1tnupdate');
	const data2 = await response.json();
	//const data =JSON.parse(data2.pitching);
console.log(data2);
	};
	</script>
		<script>
			async function d1tnhosts() {
			const response = await fetch('/api/d1tnhosts');
			const data1 = await response.json();		
		const data =JSON.parse(data1.pitching);
		//.pitching);
		var pics = data.Pictures;
		///'[{"img":"https://mmedia.tournet.com/Tournet/www.travelknowhow.com/New York/ChicagoMusical/Orquesta center.png","description":"tickets from $ 150 to $420","name":"Orquesta Center "},{"img":"https://mmedia.tournet.com/Tournet/www.travelknowhow.com/New York/ChicagoMusical/Orquesta sides.png","description":"tickets from $ 120 ","name":"Orquesta left and right"},{"img":"https://mmedia.tournet.com/Tournet/www.travelknowhow.com/New York/ChicagoMusical/Mezzanine.png","description":"tickets from $ 120 ","name":"Mezzanine "},{"img":"https://mmedia.tournet.com/Tournet/www.travelknowhow.com/New York/ChicagoMusical/Rear Mezzanine.png","description":"tickets from $ 120","name":"Mezzanine Rear "}]'
		console.log((data.Pictures));		
//var picsj = JSON.parse(pics);
if (!sessionStorage.getItem("pics")){
sessionStorage.setItem("pics",pics);
var picsj = JSON.parse(pics);
}else{
var pics = sessionStorage.getItem("pics");
var picsj = JSON.parse(pics);
};
		var tImgAll = '';
		for (var h = 0; h <picsj.length; h++ ) {
			jdata=[];
			var tname = picsj[h].name;
			var tdesc = picsj[h].description;
			jdata.push(tname);
			jdata.push(tdesc);
			var tprice ='';
var tImg = '<img name = "'+jdata+'" data ="'+picsj[h]+'" id = "'+h+'" src="'+picsj[h].img+'" style="width: 99%;" onclick = "picsDtl(event,src,name);" >';
console.log(tImgAll,jdata);
var tImgAll = tImgAll+tImg;
		};
document.getElementById("thumbs").innerHTML= tImgAll;
//	
		var tVideo = '<div width="20%" ">'+data.embVideo+data.Pitch+'</div>';
		document.getElementById("itemImg").innerHTML = tVideo;
		document.getElementById("City").value = data.City;
		document.getElementById("Province").value = data.Province;
		document.getElementById("pitch").value = data.Pitch;
		document.getElementById("Pictures").value = pics;
		document.getElementById("embVideo").value = tVideo;
				}
			</script>
<script>
function picsDtl(evt,src,name) {
//	console.log('params',document.getElementById("0").data);
var picis = src;
var Pname = name.split(',')[0];
var Pdesc = name.split(',')[1];
var picUrl = '<img src ="'+picis+' " style = "width:99%;"></img>';
var pcount = event.target.id;
document.getElementById("itemImg").innerHTML = picUrl;
//document.getElementById("tofr").name = name; 	
//document.getElementById("detail").descp = Pdesc; 

//var element = document.getElementById('tofr');
 //   element.style.display = 'block';
 var htmlPics = 
'<form id="updPics" >' +
	'<div> <input id="name" value = "'+Pname+'">'+											
'<input  id ="descI" value ="'+
Pdesc +'" >'+
'<div> <input id="'+ pcount+'" type ="Submit"  style= "float: left;" onclick= "picPost(event,id); "></div>';

									'</form>'
;	
document.getElementById('picDtls').innerHTML = htmlPics;								                           							            										                           
	//				$('#'+ picDtls + '').html(updPics);
	//				$('#'+ picDtls + '').slideDown('slow');

//	<img id="fjson" type="submit" src="https://tournet.com/SocialITIN/img/feedicon.jpg" width="32px" height="32px" style="margin-top:10px; float:right;" onclick="picsUpd()">
		
};	
</script>	

<script> 
function picPost(evt,id){
//document.getElementById("name").value= document.getElementById("descI").value;
//json.price = 30;
//picsj.name = document.getElementById("name").value;
var ppicsj = JSON.parse(sessionStorage.getItem("pics"));
ppicsj[id].name = document.getElementById("name").value;
ppicsj[id].description = document.getElementById("descI").value;
//console.log(ppicsj[id].name ,ppicsj[id].description);
sessionStorage.setItem("pics",JSON.stringify(ppicsj));
};
</script>

<script>
			async function fetchjson() {
			const response = await fetch('/api/fetchjson');
			const data = await response.json();
		//const data =JSON.parse(data1);
		console.log(data.pitching);
		sessionStorage.setItem("j2post",JSON.stringify(data));	
var j2addStorage = {
  "IATA": "US2",
  "City": "US3-Eastern",
  "Province": "Western",
  "embVideo": "<div style=\"position: relative; padding-top: 100%;\"><iframe src=\"https://iframe.videodelivery.net/c572438216d9778a180b4df0784ffb4d?poster=https%3A%2F%2Fvideodelivery.net%2Fc572438216d9778a180b4df0784ffb4d%2Fthumbnails%2Fthumbnail.jpg%3Ftime%3D%26height%3D600\" style=\"border: none; position: absolute; top: 0; left: 0; height: 100%; width: 100%;\" allow=\"accelerometer; gyroscope; autoplay; encrypted-media; picture-in-picture;\" allowfullscreen=\"true\"></iframe></div>",
  "Pictures":" [{\"img\":\"https://mmedia.tournet.com/Tournet/www.travelknowhow.com/New York/ChicagoMusical/Orquesta center.png\",\"description\":\"tickets from $ 150 to $420\",\"name\":\"Orquesta Center \"},{\"img\":\"https://mmedia.tournet.com/Tournet/www.travelknowhow.com/New York/ChicagoMusical/Orquesta sides.png\",\"description\":\"tickets from $ 120 \",\"name\":\"Orquesta left and right\"},{\"img\":\"https://mmedia.tournet.com/Tournet/www.travelknowhow.com/New York/ChicagoMusical/Mezzanine.png\",\"description\":\"tickets from $ 120 \",\"name\":\"Mezzanine \"},{\"img\":\"https://mmedia.tournet.com/Tournet/www.travelknowhow.com/New York/ChicagoMusical/Rear Mezzanine.png\",\"description\":\"tickets from $ 120\",\"name\":\"Mezzanine Rear \"}]",
  "Pitch": "NOT Unique and captivating, with channels that continually change a scenario unlike any other in the world."
};

var j2add = j2addStorage;
var j2publish =data; 
//const j2add = JSON.parse(sessionStorage.getItem("j2add")); 
//const mergedObj = Object.assign(j2publish, j2addStorage); 
//const jsonStr = JSON.stringify(mergedObj); 

//const extendJSON = (...objs) => objs.reduce((result, current) => ({...result, ...JSON.parse(current)}), {});
  
//console.log(extendJSON(j2publish, j2add),j2aad);
//console.log(jsonStr); 
var newjson = j2publish["NYCS"].push(j2add);
console.log(j2publish);
 //response2 = await fetch('/api/fetchputjson');
			//const data2 = await response.json();
		//	console.log(response2);
			};	
</script>
	</body>
</html>
